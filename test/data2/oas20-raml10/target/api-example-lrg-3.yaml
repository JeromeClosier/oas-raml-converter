#%RAML 1.0
title: DataCamelDataServiceAPI
version: 0.0.1
types:
  DataField:
    description: A single data field(column) with specified field name and field type
    type: object
    properties:
      name:
        type: string
      type:
        type: string
  ServiceSpec:
    type: object
    properties:
      serviceName:
        type: string
      userName:
        type: string
      accessToken:
        type: string
      dataFields:
        type: array
        items:
          type: DataField
  ServiceSchema:
    description: Same as ServiceSpec but without accessToken.
    type: object
    properties:
      serviceName:
        type: string
      userName:
        type: string
      dataFields:
        type: array
        items:
          type: DataField
  DataEntry:
    example:
      temp: 20.5
      time: 12565
    description: 'A single data entry(row) with any number of field-name, field-value pairs'
    type: object
    properties:
      //:
        type: object
  Status:
    description: The status code and message of the response after serving a request
    type: object
    properties:
      code:
        type: integer
      message:
        type: string
  SupportedType:
    description: Information (string) about various data types supported by the system
    enum:
      - integer
      - string
      - location
      - timestamp
      - float
    type: string
  Integer:
    description: 8-byte signed integer
    type: integer
    format: int64
  Float:
    description: 8-byte double precision floating-point
    type: number
    format: double
  Location:
    description: >-
      Signed degrees format Signed degrees format (DDD.dddd)

      A latitude or longitude with 8 decimal places pinpoints a location to
      within 1 millimeter,( 1/16 inch).

      Precede South latitudes and West longitudes with a minus sign. Latitudes
      range from -90 to 90. Longitudes range from -180 to 180.

      41.25,-120.9762 -31.96,115.84 90,0 (North Pole)
    pattern: >-
      ^[-+]?([1-8]?\d(\.\d+)?|90(\.0+)?),\s*[-+]?(180(\.0+)?|((1[0-7]\d)|([1-9]?\d))(\.\d+)?)$
    type: string
  Timestamp:
    description: UNIX timestamp in milliseconds since 1970. (8 bytes)
    type: integer
    format: int64
  String:
    description: At least one and up to 160 characters
    minLength: 1
    maxLength: 160
    type: string
/types:
  get:
    displayName: GET_types
    description: Gets a list of types supported by the service API.
    responses:
      '200':
        description: ''
        body:
          application/json:
            type: array
            items:
              type: SupportedType
            required: false
      '500':
        description: ''
        body:
          application/json:
            type: Status
            required: false
/service:
  post:
    displayName: POST_service
    description: Creates a new service
    responses:
      '201':
        description: ''
        body:
          application/json:
            type: Status
            required: false
      '400':
        description: Bad Request Error
        body:
          application/json:
            type: Status
            required: false
      '401':
        description: Unauthroized Error
        body:
          application/json:
            type: Status
            required: false
      '500':
        description: Internal Server Error
        body:
          application/json:
            type: Status
            required: false
    body:
      application/json:
        type: ServiceSpec
        required: false
  '/{userName}':
    '/{serviceName}':
      uriParameters:
        userName:
          type: string
        serviceName:
          type: string
      delete:
        displayName: DELETE_service-userName-serviceName
        description: Delete the service with name serviceName of a user with name userName.
        responses:
          '200':
            description: ''
            body:
              application/json:
                type: Status
                required: false
          '401':
            description: Unauthroized Error
            body:
              application/json:
                type: Status
                required: false
          '404':
            description: Not Found Error
            body:
              application/json:
                type: Status
                required: false
          '500':
            description: Internal Server Error
            body:
              application/json:
                type: Status
                required: false
      get:
        displayName: GET_service-userName-serviceName
        description: >-
          Get the schema of a service(with name serviceName) of a user (with
          name userName).
        responses:
          '200':
            description: ''
            body:
              application/json:
                type: ServiceSchema
                required: false
          '404':
            description: Not Found Error
            body:
              application/json:
                type: Status
                required: false
          '500':
            description: Internal Server Error
            body:
              application/json:
                type: Status
                required: false
      /entry:
        uriParameters:
          userName:
            type: string
          serviceName:
            type: string
        post:
          displayName: POST_service-userName-serviceName-entry
          description: >-
            Adds a single/list of data entry/entries to a service(with name
            serviceName) of a user(with name userName). Responds with all data
            entries of the service after the new addition.
          responses:
            '201':
              description: ''
              body:
                application/json:
                  type: array
                  items:
                    type: DataEntry
                  required: false
            '400':
              description: Bad Request Error
              body:
                application/json:
                  type: Status
                  required: false
            '401':
              description: Unauthroized Error
              body:
                application/json:
                  type: Status
                  required: false
            '404':
              description: Not Found Error
              body:
                application/json:
                  type: Status
                  required: false
            '500':
              description: Internal Server Error
              body:
                application/json:
                  type: Status
                  required: false
          body:
            application/json:
              type: array
              items:
                type: DataEntry
              required: false
        delete:
          displayName: DELETE_service-userName-serviceName-entry
          description: >-
            Deletes all data entries from a service(with name serviceName) of a
            user(with name userName).
          responses:
            '200':
              description: ''
              body:
                application/json:
                  type: Status
                  required: false
            '401':
              description: Unauthroized Error
              body:
                application/json:
                  type: Status
                  required: false
            '404':
              description: Not Found Error
              body:
                application/json:
                  type: Status
                  required: false
            '500':
              description: Internal Server Error
              body:
                application/json:
                  type: Status
                  required: false
        get:
          displayName: GET_service-userName-serviceName-entry
          description: >-
            Gets all data entries from a service(with name serviceName) of a
            user(with name userName).
          responses:
            '200':
              description: >-
                A list of data entries, each of which comprises a number of
                name-value mappings corresponding to the data fields
              body:
                application/json:
                  type: array
                  items:
                    type: DataEntry
                  required: false
            '404':
              description: Not Found Error
              body:
                application/json:
                  type: Status
                  required: false
            '500':
              description: Internal Server Error
              body:
                application/json:
                  type: Status
                  required: false
        '/{id}':
          uriParameters:
            userName:
              type: string
            serviceName:
              type: string
            id:
              type: string
          put:
            displayName: PUT_service-userName-serviceName-entry-id
            description: >-
              Updates a single data entry by id. Responds with all data entries
              of the service after the update.
            responses:
              '200':
                description: ''
                body:
                  application/json:
                    type: array
                    items:
                      type: DataEntry
                    required: false
              '400':
                description: Bad Request Error
                body:
                  application/json:
                    type: Status
                    required: false
              '401':
                description: Unauthroized Error
                body:
                  application/json:
                    type: Status
                    required: false
              '404':
                description: Not Found Error
                body:
                  application/json:
                    type: Status
                    required: false
              '500':
                description: Internal Server Error
                body:
                  application/json:
                    type: Status
                    required: false
            body:
              application/json:
                type: DataEntry
                required: false
          delete:
            displayName: DELETE_service-userName-serviceName-entry-id
            description: >-
              Deletes a single data entry by id. Responds with all data entries
              of the service after the deletion
            responses:
              '201':
                description: ''
                body:
                  application/json:
                    type: array
                    items:
                      type: DataEntry
                    required: false
              '401':
                description: Unauthroized Error
                body:
                  application/json:
                    type: Status
                    required: false
              '404':
                description: Not Found Error
                body:
                  application/json:
                    type: Status
                    required: false
              '500':
                description: Internal Server Error
                body:
                  application/json:
                    type: Status
                    required: false